define ("mod_kalvidassign/kalvidassign",["exports","jquery","core/notification","core/pubsub","core/str","core/modal_factory","local_kaltura/modal_video_picker","local_kaltura/modal_video_picker_events","local_kaltura/modal_kaltura_upload","local_kaltura/kaltura_events","local_kaltura/kaltura_ajax"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=void 0;b=l(b);c=l(c);f=l(f);g=l(g);h=l(h);i=l(i);j=l(j);k=l(k);function l(a){return a&&a.__esModule?a:{default:a}}function m(a,b){return p(a)||o(a,b)||n()}function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g=a[Symbol.iterator](),h;!(d=(h=g.next()).done);d=!0){c.push(h.value);if(b&&c.length===b)break}}catch(a){e=!0;f=a}finally{try{if(!d&&null!=g["return"])g["return"]()}finally{if(e)throw f}}return c}function p(a){if(Array.isArray(a))return a}function q(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){c(a);return}if(h.done){b(i)}else{Promise.resolve(i).then(d,e)}}function r(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var h=a.apply(b,c);function f(a){q(h,d,e,f,g,"next",a)}function g(a){q(h,d,e,f,g,"throw",a)}f(void 0)})}}var s={OPEN_VIDEO_PICKER:"[data-action=\"add-media\"]",OPEN_UPLOAD_MODAL:"[data-action=\"upload\"]",ENTRY_ID:"#entry_id",ENTRY_THUMBNAIL:"#media_thumbnail",SELECTED_ENTRY_HEADER:"[data-region=\"selected-entry-header\"]",SUBMIT:"#submit_media"},t=function(){var a=r(regeneratorRuntime.mark(function a(b,d,e,h,j){var k,l,n,o;return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Promise.all([f.default.create({type:g.default.getType()}),f.default.create({type:i.default.getType()})]);case 3:k=a.sent;l=m(k,2);n=l[0];o=l[1];n.contextid=b;n.selectedEntryId=d;n.selectedEntryName=e;n.selectedEntryThumbnail=h;n.hasCe=j;o.contextid=b;u(n,o,b);a.next=19;break;case 16:a.prev=16;a.t0=a["catch"](0);c.default.exception(a.t0);case 19:case"end":return a.stop();}}},a,null,[[0,16]])}));return function(){return a.apply(this,arguments)}}();a.init=t;var u=function(a,c,e){(0,b.default)(s.OPEN_VIDEO_PICKER).on("click",function(){a.show()});(0,b.default)(s.OPEN_UPLOAD_MODAL).on("click",function(a){a.preventDefault();var d=(0,b.default)(a.currentTarget).attr("data-upload-type");c.renderUploadForm(d);c.show()});(0,d.subscribe)(h.default.entrySelected,function(){var a=r(regeneratorRuntime.mark(function a(b){return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:v(b.entryId,b.entryName,b.entryThumbnail);case 1:case"end":return a.stop();}}},a)}));return function(){return a.apply(this,arguments)}}());(0,d.subscribe)(j.default.uploadComplete,function(){var b=r(regeneratorRuntime.mark(function b(d){var f;return regeneratorRuntime.wrap(function(b){while(1){switch(b.prev=b.next){case 0:c.hide();b.next=3;return k.default.getEntry(e,d);case 3:f=b.sent;v(f.id,f.name,f.thumbnailUrl);a.selectedEntryId=f.id;a.selectedEntryName=f.name;a.selectedEntryThumbnail=f.thumbnailUrl;case 8:case"end":return b.stop();}}},b)}));return function(){return b.apply(this,arguments)}}())},v=function(){var a=r(regeneratorRuntime.mark(function a(c,d,f){var g;return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:a.next=2;return(0,e.get_string)("selected_entry","local_kaltura",d);case 2:g=a.sent;(0,b.default)(s.ENTRY_ID).val(c);(0,b.default)(s.ENTRY_THUMBNAIL).attr("src",f);(0,b.default)(s.SELECTED_ENTRY_HEADER).text(g);(0,b.default)(s.SUBMIT).prop("disabled",!1);case 7:case"end":return a.stop();}}},a)}));return function(){return a.apply(this,arguments)}}()});
//# sourceMappingURL=kalvidassign.min.js.map
